webpackJsonp([2],{CTKg:function(t,e){},F7rE:function(t,e){},KlY9:function(t,e){},cfHu:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),r=s("exGp"),i=s.n(r),o=s("Dd8w"),d=s.n(o),c=s("S2w5"),l=s("NYxO"),u={name:"standard",data:function(){var t=this;return{showModal:!1,modalLoading:!0,AddressLine1:"",Name:"",City:"",StateOrProvinceCode:"",CountryCode:"",PostalCode:"",storeId:"",columns:[{title:"发货人",key:"Name",width:130},{title:"街道",key:"AddressLine1",width:130},{title:"操作",key:"action",align:"center",render:function(e,s){return e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.deleteAddress(s.row.id)}}},"删除")])}}],lists:[]}},computed:d()({},Object(l.c)(["globalStoreIdGr"])),watch:{globalStoreIdGr:function(){this._getStoreId()}},methods:d()({},Object(l.b)(["getStoreId","fetchAfterLoginData"]),{deleteAddress:function(t){var e=this;return i()(n.a.mark(function s(){var a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,c.a.deleteAddress(t,e.storeId,!0);case 2:a=s.sent,e.$responseMessage(a.data,204,"删除成功"),e.getAddressList();case 5:case"end":return s.stop()}},s,e)}))()},getAddressList:function(){var t=this;return i()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.searchAddressList({store_id:t.storeId},!0);case 2:s=e.sent,t.$responseMessage(s.data,200,"",!0)||(t.lists=s.data.msg);case 4:case"end":return e.stop()}},e,t)}))()},openModel:function(){this.showModal=!0},modalLoadingAtion:function(){var t=this;this.showModal=!0,this.modalLoading=!1,window.setTimeout(function(){t.modalLoading=!0},100)},ok:function(){var t=this;window.setTimeout(i()(n.a.mark(function e(){var s,a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=/^[A-Za-z0-9]+$/,a="字段不合法（只能添字母或数字）",!(t.$requiredInVerify(t.AddressLine1,"街道"+a,s)||t.$requiredInVerify(t.Name,"发货人"+a,s)||t.$requiredInVerify(t.City,"城市"+a,s)||t.$requiredInVerify(t.StateOrProvinceCode,"省"+a,s)||t.$requiredInVerify(t.CountryCode,"国家"+a,s)||t.$requiredInVerify(t.PostalCode,"邮编"+a,s))){e.next=5;break}return t.modalLoadingAtion(),e.abrupt("return",!1);case 5:return e.next=7,c.a.createNewAddress({AddressLine1:t.AddressLine1,Name:t.Name,City:t.City,StateOrProvinceCode:t.StateOrProvinceCode,CountryCode:t.CountryCode,PostalCode:t.PostalCode},t.storeId,!0);case 7:r=e.sent,t.$responseMessage(r.data,201,"新增成功")||(t.showModal=!1,t.reset(),t.getAddressList());case 9:case"end":return e.stop()}},e,t)})))},cancel:function(){},reset:function(){this.AddressLine1="",this.Name="",this.City="",this.StateOrProvinceCode="",this.CountryCode="",this.PostalCode=""},_getStoreId:function(){var t=this;return i()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStoreId();case 2:if(t.storeId=e.sent,!t.storeId){e.next=7;break}t.getAddressList(),e.next=15;break;case 7:return e.next=9,t.fetchAfterLoginData();case 9:if(!(s=e.sent)||!s.data.msg.store_list){e.next=15;break}return e.next=13,t.getStoreId();case 13:t.storeId=e.sent,t.storeId?t.getAddressList():t.$Message.warning("请选择店铺！");case 15:case"end":return e.stop()}},e,t)}))()}}),created:function(){this._getStoreId()}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"manage-box"},[s("div",{staticClass:"cm-form"},[s("div",{},[s("Button",{staticClass:"new-opa",attrs:{type:"primary"},nativeOn:{click:function(e){return t.openModel(e)}}},[t._v("新增")])],1)]),t._v(" "),s("div",{staticClass:"cm-table"},[s("Table",{attrs:{border:"",stripe:"",columns:t.columns,data:t.lists}})],1)]),t._v(" "),s("Modal",{attrs:{title:"新增亚马逊货件",loading:t.modalLoading},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[s("div",{staticClass:"shipment-modal"},[s("div",{staticClass:"modal-item"},[s("span",{staticClass:"vm"},[t._v("街道：")]),t._v(" "),s("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"只能添字母或数字",maxlength:60,clearable:""},model:{value:t.AddressLine1,callback:function(e){t.AddressLine1=e},expression:"AddressLine1"}})],1),t._v(" "),s("div",{staticClass:"modal-item"},[s("span",{staticClass:"vm"},[t._v("发货人：")]),t._v(" "),s("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"只能添字母或数字",maxlength:60,clearable:""},model:{value:t.Name,callback:function(e){t.Name=e},expression:"Name"}})],1),t._v(" "),s("div",{staticClass:"modal-item"},[s("span",{staticClass:"vm"},[t._v("城市：")]),t._v(" "),s("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"只能添字母或数字",maxlength:60,clearable:""},model:{value:t.City,callback:function(e){t.City=e},expression:"City"}})],1),t._v(" "),s("div",{staticClass:"modal-item"},[s("span",{staticClass:"vm"},[t._v("省：")]),t._v(" "),s("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"只能添字母或数字",maxlength:60,clearable:""},model:{value:t.StateOrProvinceCode,callback:function(e){t.StateOrProvinceCode=e},expression:"StateOrProvinceCode"}})],1),t._v(" "),s("div",{staticClass:"modal-item"},[s("span",{staticClass:"vm"},[t._v("国家：")]),t._v(" "),s("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"只能添字母或数字",maxlength:60,clearable:""},model:{value:t.CountryCode,callback:function(e){t.CountryCode=e},expression:"CountryCode"}})],1),t._v(" "),s("div",{staticClass:"modal-item"},[s("span",{staticClass:"vm"},[t._v("邮编：")]),t._v(" "),s("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"只能添字母或数字",maxlength:60,clearable:""},model:{value:t.PostalCode,callback:function(e){t.PostalCode=e},expression:"PostalCode"}})],1)])])],1)},staticRenderFns:[]};var p=s("VU/8")(u,m,!1,function(t){s("KlY9")},null,null).exports,v=s("mvHQ"),h=s.n(v),f={name:"",data:function(){return this.isNew=!0,{modalLoading:!0,showModal:!1,storeId:"",address:"",ShipmentId:"",box_id_list:[],addressList:[],columns:[{type:"selection",width:60,align:"center"},{title:"箱子ID",key:"id"}],lists:[],preViewColumns:[{title:"SKU名",key:"sku"},{title:"箱子",key:"箱子"},{title:"数量",key:"数量"}],preViewLists:[]}},computed:d()({},Object(l.c)(["globalStoreIdGr"])),watch:{globalStoreIdGr:function(){this._getStoreId()}},methods:d()({},Object(l.b)(["getStoreId","fetchAfterLoginData"]),{getPackagePreview:function(){var t=this;return i()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.getPackagePreview(t.box_id_list.join("_"),!0);case 2:s=e.sent,t.$responseMessage(s.data,200,"",!0)||(t.preViewLists=s.data.msg);case 4:case"end":return e.stop()}},e,t)}))()},getOutboundList:function(){var t=this;return i()(n.a.mark(function e(){var s,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.searchOutboundList({shipment_is_null:1,store_id:t.storeId});case 2:s=e.sent,t.$responseMessage(s.data,200,"",!0)||(a=[],s.data.msg.forEach(function(t){a.push({id:t})}),t.lists=a);case 4:case"end":return e.stop()}},e,t)}))()},_getStoreId:function(){var t=this;return i()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStoreId();case 2:if(t.storeId=e.sent,!t.storeId){e.next=8;break}t.getOutboundList(),t.getAddressList(),e.next=16;break;case 8:return e.next=10,t.fetchAfterLoginData();case 10:if(!(s=e.sent)||!s.data.msg.store_list){e.next=16;break}return e.next=14,t.getStoreId();case 14:t.storeId=e.sent,t.storeId?(t.getOutboundList(),t.getAddressList()):t.$Message.warning("请选择店铺！");case 16:case"end":return e.stop()}},e,t)}))()},getAddressList:function(){var t=this;return i()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.searchAddressList({store_id:t.storeId},!0);case 2:s=e.sent,t.$responseMessage(s.data,200,"",!0)||(t.addressList=s.data.msg);case 4:case"end":return e.stop()}},e,t)}))()},selectItem:function(t){var e=[];t.forEach(function(t){e.push(t.id)}),this.box_id_list=e},openModel:function(t){if(this.isNew=t,!this.isNew&&!this.ShipmentId)return this.$Message.warning("请输入货件编号"),!1;this.showModal=!0},modalLoadingAtion:function(){var t=this;this.showModal=!0,this.modalLoading=!1,window.setTimeout(function(){t.modalLoading=!0},100)},ok:function(){var t=this;window.setTimeout(i()(n.a.mark(function e(){var s,a,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$requiredInVerify(t.address,"发货地址")){e.next=3;break}return t.modalLoadingAtion(),e.abrupt("return");case 3:if(!t.isNew){e.next=11;break}return e.next=6,c.a.createNewFbashipment(t.storeId,{address:t.address,box_id_list:h()(t.box_id_list)});case 6:s=e.sent,t.reset(),t.$responseMessage(s.data,201,"创建成功")||(a=[],s.data.msg.forEach(function(t){a.push(t.ShipmentId)}),t.ShipmentId=a.join(" | "),t.showModal=!1),e.next=16;break;case 11:return e.next=13,c.a.updateFbashipment(t.ShipmentId,t.storeId,{address:t.address,box_id_list:h()(t.box_id_list)});case 13:r=e.sent,t.reset(),t.$responseMessage(r.data,200,"更新成功")||(t.showModal=!1);case 16:t.showModal=!1;case 17:case"end":return e.stop()}},e,t)})))},cancel:function(){this.reset()},reset:function(){this.address=""},refresh:function(){this.box_id_list=[],this.getOutboundList()}}),created:function(){this._getStoreId()}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cou-box"},[s("div",{staticClass:"manage-box"},[s("div",{staticClass:"cm-form"},[s("Button",{attrs:{type:"primary",disabled:t.box_id_list.length<=0},nativeOn:{click:function(e){t.openModel(!0)}}},[t._v("新增")]),t._v(" "),s("Button",{staticClass:"mid-m",attrs:{type:"warning"},nativeOn:{click:function(e){t.openModel(!1)}}},[t._v("更新")]),t._v(" "),s("Input",{staticStyle:{width:"500px"},attrs:{placeholder:"货件编号",clearable:""},model:{value:t.ShipmentId,callback:function(e){t.ShipmentId=e},expression:"ShipmentId"}})],1),t._v(" "),s("div",{staticClass:"cm-table",staticStyle:{width:"25%"}},[s("Table",{attrs:{border:"",stripe:"",columns:t.columns,data:t.lists},on:{"on-selection-change":t.selectItem}})],1),t._v(" "),s("Modal",{attrs:{title:"新增货件",loading:t.modalLoading},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[s("div",{staticClass:"modal-item"},[s("span",{staticClass:"vm cou-item"},[t._v("发货地址：")]),t._v(" "),s("Select",{staticClass:"vm",staticStyle:{width:"200px"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}},t._l(t.addressList,function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.Name+" | "+e.AddressLine1))])}))],1)])],1),t._v(" "),s("Button",{staticClass:"refresh",attrs:{type:"primary"},nativeOn:{click:function(e){return t.refresh(e)}}},[t._v("刷新")]),t._v(" "),s("Button",{staticClass:"preview-btn",attrs:{type:"primary",disabled:t.box_id_list.length<=0},nativeOn:{click:function(e){return t.getPackagePreview(e)}}},[t._v("预览")]),t._v(" "),s("div",{staticClass:"preview-table",staticStyle:{width:"35%"}},[s("Table",{attrs:{border:"",stripe:"",columns:t.preViewColumns,data:t.preViewLists}})],1)],1)},staticRenderFns:[]};var w=s("VU/8")(f,g,!1,function(t){s("CTKg")},null,null).exports,_=s("E9eC"),b=s.n(_),C={name:"",data:function(){return{ShipmentId:""}},methods:{download:function(){b()(["/api/package-list/?shipment_id="+this.ShipmentId],"装箱单"+this.ShipmentId+".csv")}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"manage-box"},[s("div",{staticClass:"cm-form"},[s("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"货件编号",clearable:""},model:{value:t.ShipmentId,callback:function(e){t.ShipmentId=e},expression:"ShipmentId"}}),t._v(" "),s("Button",{staticClass:"download",attrs:{type:"primary",size:"small",disabled:!t.ShipmentId},on:{click:t.download}},[t._v("下载")])],1)])])},staticRenderFns:[]};var I={name:"shipment",components:{standard:p,creareOrUpdate:w,packageList:s("VU/8")(C,x,!1,function(t){s("gpwk")},null,null).exports}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Tabs",{attrs:{animated:!1}},[e("TabPane",{attrs:{label:"管理亚马逊货件"}},[e("standard")],1),this._v(" "),e("TabPane",{attrs:{label:"创建/更新亚马逊货件"}},[e("creare-or-update")],1),this._v(" "),e("TabPane",{attrs:{label:"查询装箱单"}},[e("package-list")],1)],1)],1)},staticRenderFns:[]};var y=s("VU/8")(I,k,!1,function(t){s("F7rE")},null,null);e.default=y.exports},gpwk:function(t,e){}});
//# sourceMappingURL=2.bc60928e94d4c1b9808b.js.map