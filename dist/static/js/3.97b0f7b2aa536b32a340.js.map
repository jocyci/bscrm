{"version":3,"sources":["webpack:///./node_modules/core-js/library/modules/es6.object.keys.js","webpack:///./node_modules/babel-runtime/core-js/object/keys.js","webpack:///./node_modules/core-js/library/fn/object/keys.js","webpack:///src/pages/worker/outbound.vue","webpack:///./src/pages/worker/outbound.vue?c2a7","webpack:///./src/pages/worker/outbound.vue"],"names":["toObject","__webpack_require__","$keys","it","module","exports","default","__esModule","Object","keys","outbound","computed","extends_default","vuex_esm","_getStoreId","methods","_this","this","key","reset","getOutboundId","_this2","delete_Id","msg","_this3","getBarcodeMapping","_this4","storeId","_this5","getStoreId","fetchAfterLoginData","store_list","audio","play","_this6","num","playAudio","worker_outbound","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","src","isScuess","_v","type","href","boxId","staticStyle","width","placeholder","model","value","callback","$$v","load","expression","extract","nativeOn","click","$event","saveOutbounds","_s","deleteOutbound","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"uCACA,IAAAA,EAAAC,EAAA,QACAC,EAAAD,EAAA,QAEAA,EAAA,OAAAA,CAAA,kBACA,gBAAAE,GACA,OAAAD,EAAAF,EAAAG,kDCNAC,EAAAC,SAAkBC,QAAAL,EAAA,QAAAM,YAAA,yBCAlBN,EAAA,QACAG,EAAAC,QAAAJ,EAAA,QAAAO,OAAAC,8NCiDAC,QAEA,uEAKA,WACA,aACA,OACA,WACA,wBAEA,OAEA,IAEAC,SAAAC,OAAAJ,OAAAK,EAAA,EAAAL,EAEA,4DAGAM,qDAGA,kDAGA,aAGAC,QAAAH,OAAAJ,OAAAK,EAAA,EAAAL,EAAA,aACA,kDACA,IAAAQ,EAAAC,0LAGAC,6EAEA,6DAEAC,UACAC,yFAGA,IAAAC,EAAAJ,iJACAK,gEACAC,4EAEA,IAAAC,EAAAP,oJACA,yEAEAM,MACAE,gGAGA,IAAAC,EAAAT,8JACAU,qFAEAJ,4BACAA,2EAGA,IAAAK,EAAAX,8HACAY,2CACAF,QAAA,kBAEAP,yDACAU,yDACAC,WAAA,oCACAF,kDAEAT,mCAEA,yIASA,mCAGAY,MACAC,mCAEA,IAAAC,EAAAjB,uDAGA,qDAGA,kBAEA,OAEAkB,wCAEA,OACAA,iFAEA,WACA,oBAIA,iCAGA,KACAC,0CAMAtB,gBCrKAuB,GADiBC,OAFjB,WAA0B,IAAAC,EAAAtB,KAAauB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,iBAA2BF,EAAA,SAAcG,IAAA,QAAAC,OAAmBC,IAAAR,EAAAS,SAAA,6HAAkJT,EAAAU,GAAA,KAAAP,EAAA,OAAwBE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,QAAkBF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,QAAaE,YAAA,gBAA0BL,EAAAU,GAAA,WAAAP,EAAA,UAAiCE,YAAA,KAAAE,OAAwBI,KAAA,aAAkBR,EAAA,KAAUI,OAAOK,KAAA,kBAAAZ,EAAAa,MAAA,IAAAb,EAAAa,MAAA,QAAiEb,EAAAU,GAAA,kBAAAV,EAAAU,GAAA,KAAAP,EAAA,OAAiDE,YAAA,0BAAoCF,EAAA,QAAaE,YAAA,gBAA0BL,EAAAU,GAAA,WAAAV,EAAAU,GAAA,KAAAP,EAAA,SAA4CW,aAAaC,MAAA,SAAgBR,OAAQS,YAAA,IAAiBC,OAAQC,MAAAlB,EAAA,KAAAmB,SAAA,SAAAC,GAA0CpB,EAAAqB,KAAAD,GAAaE,WAAA,WAAoB,GAAAtB,EAAAU,GAAA,KAAAP,EAAA,OAA4BE,YAAA,0BAAoCF,EAAA,QAAaE,YAAA,gBAA0BL,EAAAU,GAAA,WAAAV,EAAAU,GAAA,KAAAP,EAAA,SAA4CW,aAAaC,MAAA,SAAgBR,OAAQS,YAAA,IAAiBC,OAAQC,MAAAlB,EAAA,QAAAmB,SAAA,SAAAC,GAA6CpB,EAAAuB,QAAAH,GAAgBE,WAAA,cAAuB,GAAAtB,EAAAU,GAAA,KAAAP,EAAA,OAA4BE,YAAA,mBAA6BF,EAAA,UAAeE,YAAA,KAAAE,OAAwBI,KAAA,WAAiBa,UAAWC,MAAA,SAAAC,GAAyB,OAAA1B,EAAA2B,cAAAD,OAAmC1B,EAAAU,GAAA,cAAAV,EAAAU,GAAA,KAAAP,EAAA,OAA6CE,YAAA,QAAkBF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,QAAaE,YAAA,gBAA0BL,EAAAU,GAAA,SAAAV,EAAA4B,GAAA5B,EAAAJ,cAAAI,EAAAU,GAAA,KAAAP,EAAA,OAAiEE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,QAAkBF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,QAAaE,YAAA,yBAAmCL,EAAAU,GAAA,WAAAV,EAAAU,GAAA,KAAAP,EAAA,SAA4CW,aAAaC,MAAA,SAAgBR,OAAQS,YAAA,IAAiBC,OAAQC,MAAAlB,EAAA,UAAAmB,SAAA,SAAAC,GAA+CpB,EAAAjB,UAAAqC,GAAkBE,WAAA,eAAyBtB,EAAAU,GAAA,KAAAP,EAAA,UAA2BE,YAAA,KAAAE,OAAwBI,KAAA,SAAea,UAAWC,MAAA,SAAAC,GAAyB,OAAA1B,EAAA6B,eAAAH,OAAoC1B,EAAAU,GAAA,mBAElhEoB,oBCCjB,IAcAC,EAdArE,EAAA,OAcAsE,CACA7D,EACA2B,GATA,EAVA,SAAAmC,GACAvE,EAAA,SAaA,KAEA,MAUAwE,EAAA,QAAAH,EAAA","file":"static/js/3.97b0f7b2aa536b32a340.js","sourcesContent":["// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.keys.js\n// module id = Cdx3\n// module chunks = 3","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/keys.js\n// module id = fZjL\n// module chunks = 3","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/keys.js\n// module id = jFbC\n// module chunks = 3","<template>\n  <div class=\"outbound-box\">\n    <audio ref=\"audio\" :src=\"isScuess ? 'http://hehe-1252068473.costj.myqcloud.com/static/sheep.wav' : 'http://hehe-1252068473.costj.myqcloud.com/static/horse.wav'\"></audio>\n    <div class=\"ob-block\">\n      <div class=\"obb\">\n        <div class=\"smt-item vm\">\n          <span class=\"vm si-title\">开始装箱 </span><Button type=\"default\"  class=\"vm\"><a :href=\"`printtag:fnsku/${boxId}/${boxId}/2`\n\">打印箱子编码</a></Button>\n        </div>\n        <div class=\"smt-item vm smt-input\">\n          <span class=\"vm si-title\">装入扫描 </span>\n          <Input  placeholder=\"\"  style=\"width: 180px\" v-model=\"load\"></Input>\n        </div>\n        <div class=\"smt-item vm smt-input\">\n          <span class=\"vm si-title\">取出扫描 </span>\n          <Input  placeholder=\"\"  style=\"width: 180px\" v-model=\"extract\"></Input>\n        </div>\n        <div class=\"smt-item vm fr\">\n          <Button type=\"primary\"  class=\"vm\" @click.native=\"saveOutbounds\">提交</Button>\n        </div>\n      </div>\n      <div class=\"obb\">\n        <div class=\"smt-item vm\">\n          <span class=\"vm si-title\">已扫描数量：{{num}}</span>\n        </div>\n      </div>\n    </div>\n    <div class=\"ob-block\">\n      <div class=\"obb\">\n        <div class=\"smt-item vm\">\n          <span class=\"vm si-title font-red\">删除箱子 </span>\n          <Input  placeholder=\"\"  style=\"width: 180px\" v-model=\"delete_Id\"></Input>\n          <Button type=\"error\"  class=\"vm\" @click.native=\"deleteOutbound\">提交</Button>\n        </div>\n      </div>\n    </div>\n    <!-- <div class=\"ob-block\">\n      <div class=\"obb\">\n        <div class=\"smt-item vm\">\n          <Button type=\"primary\"  class=\"vm\" @click.native=\"saveOutbounds\">查询</Button>\n        </div>\n      </div>\n    </div> -->\n  </div>\n</template>\n\n<script>\nimport Apis from '@/common/js/apis'\nimport {mapGetters, mapActions} from 'vuex'\n\nexport default {\n  name: '',\n  data () {\n    this.mapBarcode = {}\n    this.barcodeArr = []\n    return {\n      boxId: '',\n      storeId: '',\n      isScuess: true,\n      load: '',\n      extract: '',\n      skulist: {},\n      delete_Id: '',\n      num: 0\n    }\n  },\n  computed: {\n    ...mapGetters(['globalStoreIdGr'])\n  },\n  watch: {\n    globalStoreIdGr () {\n      this._getStoreId()\n    },\n    load (val) {\n      this.judgeValue(val, true, 'load')\n    },\n    extract (val) {\n      this.judgeValue(val, false, 'extract')\n    }\n  },\n  methods: {\n    ...mapActions(['getStoreId', 'fetchAfterLoginData']),\n    async saveOutbounds () {\n      let skulist = {}\n      Object.keys(this.skulist).forEach(key => {\n        skulist[this.mapBarcode[key]] = this.skulist[key]\n      })\n      let response = await Apis.saveOutbounds(this.boxId, {store_id: this.storeId, skulist: JSON.stringify(skulist)}, true)\n      if (!this.$responseMessage(response.data, 202, '提交成功')) {\n        this.reset()\n        this.getOutboundId()\n      }\n    },\n    async deleteOutbound () {\n      let response = await Apis.deleteOutbound(this.delete_Id)\n      this.$responseMessage(response.data, 202, response.data.msg)\n    },\n    async getOutboundId () {\n      let response = await Apis.getOutboundId(null, true)\n      if (!this.$responseMessage(response.data, 200, '', true)) {\n        this.boxId = response.data.msg\n        this.getBarcodeMapping()\n      }\n    },\n    async getBarcodeMapping () {\n      let response = await Apis.getBarcodeMapping({store_id: this.storeId})\n      if (!this.$responseMessage(response.data, 200, '', true)) {\n        this.mapBarcode = response.data.msg\n        this.barcodeArr = Object.keys(response.data.msg)\n      }\n    },\n    async _getStoreId () {\n      this.storeId = await this.getStoreId()\n      if (this.storeId) {\n        this.getOutboundId()\n      } else {\n        let afterLoginData = await this.fetchAfterLoginData()\n        if (afterLoginData && afterLoginData.data.msg.store_list) {\n          this.storeId = await this.getStoreId()\n          if (this.storeId) {\n            this.getOutboundId()\n          } else {\n            this.$Message.warning('请选择店铺！')\n          }\n        }\n      }\n    },\n    reset () {\n      this.mapBarcode = {}\n      this.barcodeArr = []\n      this.skulist = {}\n      this.num = 0\n    },\n    playAudio () {\n      let ele = this.$refs.audio\n      ele.play()\n    },\n    judgeValue (val, isAdd, key) {\n      if (val) {\n        if (this.barcodeArr.indexOf(val) > -1) {\n          this.isScuess = true\n          if (isAdd) {\n            if (this.skulist[val]) {\n              this.skulist[val] = this.skulist[val] + 1\n            } else {\n              this.skulist[val] = 1\n            }\n            this.num++\n          } else {\n            this.skulist[val] = this.skulist[val] - 1\n            this.num--\n            if (this.skulist[val] === undefined || this.skulist[val] < 0 || this.num < 0) {\n              this.isScuess = false\n              this.num = 0\n            }\n          }\n        } else {\n          this.isScuess = false\n        }\n        this.$nextTick(() => {\n          this[key] = ''\n          this.playAudio()\n        })\n      }\n    }\n  },\n  mounted () {\n    this._getStoreId()\n  }\n}\n</script>\n\n<style>\n.smt-item {\n  font-size: 18px;\n  margin-right: 60px;\n}\n.ob-block {\n  margin-top: 20px;\n  border-bottom: 1px solid #ddd;\n  color: #666;\n}\n.ob-block:last-child {\n  border-bottom: 0;\n}\n.si-title {\n  margin-right: 14px;\n}\n.obb {\n  margin-bottom: 15px;\n}\n.smt-input input:focus {\n  background: red;\n  color: #fff;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/worker/outbound.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outbound-box\"},[_c('audio',{ref:\"audio\",attrs:{\"src\":_vm.isScuess ? 'http://hehe-1252068473.costj.myqcloud.com/static/sheep.wav' : 'http://hehe-1252068473.costj.myqcloud.com/static/horse.wav'}}),_vm._v(\" \"),_c('div',{staticClass:\"ob-block\"},[_c('div',{staticClass:\"obb\"},[_c('div',{staticClass:\"smt-item vm\"},[_c('span',{staticClass:\"vm si-title\"},[_vm._v(\"开始装箱 \")]),_c('Button',{staticClass:\"vm\",attrs:{\"type\":\"default\"}},[_c('a',{attrs:{\"href\":(\"printtag:fnsku/\" + _vm.boxId + \"/\" + _vm.boxId + \"/2\")}},[_vm._v(\"打印箱子编码\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"smt-item vm smt-input\"},[_c('span',{staticClass:\"vm si-title\"},[_vm._v(\"装入扫描 \")]),_vm._v(\" \"),_c('Input',{staticStyle:{\"width\":\"180px\"},attrs:{\"placeholder\":\"\"},model:{value:(_vm.load),callback:function ($$v) {_vm.load=$$v},expression:\"load\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"smt-item vm smt-input\"},[_c('span',{staticClass:\"vm si-title\"},[_vm._v(\"取出扫描 \")]),_vm._v(\" \"),_c('Input',{staticStyle:{\"width\":\"180px\"},attrs:{\"placeholder\":\"\"},model:{value:(_vm.extract),callback:function ($$v) {_vm.extract=$$v},expression:\"extract\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"smt-item vm fr\"},[_c('Button',{staticClass:\"vm\",attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.saveOutbounds($event)}}},[_vm._v(\"提交\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"obb\"},[_c('div',{staticClass:\"smt-item vm\"},[_c('span',{staticClass:\"vm si-title\"},[_vm._v(\"已扫描数量：\"+_vm._s(_vm.num))])])])]),_vm._v(\" \"),_c('div',{staticClass:\"ob-block\"},[_c('div',{staticClass:\"obb\"},[_c('div',{staticClass:\"smt-item vm\"},[_c('span',{staticClass:\"vm si-title font-red\"},[_vm._v(\"删除箱子 \")]),_vm._v(\" \"),_c('Input',{staticStyle:{\"width\":\"180px\"},attrs:{\"placeholder\":\"\"},model:{value:(_vm.delete_Id),callback:function ($$v) {_vm.delete_Id=$$v},expression:\"delete_Id\"}}),_vm._v(\" \"),_c('Button',{staticClass:\"vm\",attrs:{\"type\":\"error\"},nativeOn:{\"click\":function($event){return _vm.deleteOutbound($event)}}},[_vm._v(\"提交\")])],1)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-582843e6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/worker/outbound.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-582843e6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./outbound.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./outbound.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./outbound.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-582843e6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./outbound.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/worker/outbound.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}