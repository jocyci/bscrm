webpackJsonp([3],{Cdx3:function(t,e,s){var a=s("sB3e"),n=s("lktj");s("uqUo")("keys",function(){return function(t){return n(a(t))}})},ZwcO:function(t,e){},fZjL:function(t,e,s){t.exports={default:s("jFbC"),__esModule:!0}},jFbC:function(t,e,s){s("Cdx3"),t.exports=s("FeBl").Object.keys},nqJD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),i=s("mvHQ"),r=s.n(i),o=s("fZjL"),c=s.n(o),u=s("exGp"),d=s.n(u),l=s("Dd8w"),v=s.n(l),p=s("S2w5"),f=s("NYxO"),m={name:"",data:function(){return this.mapBarcode={},this.barcodeArr=[],{boxId:"",storeId:"",isScuess:!0,load:"",extract:"",skulist:{},delete_Id:"",num:0}},computed:v()({},Object(f.c)(["globalStoreIdGr"])),watch:{globalStoreIdGr:function(){this._getStoreId()},load:function(t){this.judgeValue(t,!0,"load")},extract:function(t){this.judgeValue(t,!1,"extract")}},methods:v()({},Object(f.b)(["getStoreId","fetchAfterLoginData"]),{saveOutbounds:function(){var t=this;return d()(n.a.mark(function e(){var s,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={},c()(t.skulist).forEach(function(e){s[t.mapBarcode[e]]=t.skulist[e]}),e.next=4,p.a.saveOutbounds(t.boxId,{store_id:t.storeId,skulist:r()(s)},!0);case 4:a=e.sent,t.$responseMessage(a.data,202,"提交成功")||(t.reset(),t.getOutboundId());case 6:case"end":return e.stop()}},e,t)}))()},deleteOutbound:function(){var t=this;return d()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.deleteOutbound(t.delete_Id);case 2:s=e.sent,t.$responseMessage(s.data,202,s.data.msg);case 4:case"end":return e.stop()}},e,t)}))()},getOutboundId:function(){var t=this;return d()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getOutboundId(null,!0);case 2:s=e.sent,t.$responseMessage(s.data,200,"",!0)||(t.boxId=s.data.msg,t.getBarcodeMapping());case 4:case"end":return e.stop()}},e,t)}))()},getBarcodeMapping:function(){var t=this;return d()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getBarcodeMapping({store_id:t.storeId});case 2:s=e.sent,t.$responseMessage(s.data,200,"",!0)||(t.mapBarcode=s.data.msg,t.barcodeArr=c()(s.data.msg));case 4:case"end":return e.stop()}},e,t)}))()},_getStoreId:function(){var t=this;return d()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStoreId();case 2:if(t.storeId=e.sent,!t.storeId){e.next=7;break}t.getOutboundId(),e.next=15;break;case 7:return e.next=9,t.fetchAfterLoginData();case 9:if(!(s=e.sent)||!s.data.msg.store_list){e.next=15;break}return e.next=13,t.getStoreId();case 13:t.storeId=e.sent,t.storeId?t.getOutboundId():t.$Message.warning("请选择店铺！");case 15:case"end":return e.stop()}},e,t)}))()},reset:function(){this.mapBarcode={},this.barcodeArr=[],this.skulist={},this.num=0},playAudio:function(){this.$refs.audio.play()},judgeValue:function(t,e,s){var a=this;t&&(this.barcodeArr.indexOf(t)>-1?(this.isScuess=!0,e?(this.skulist[t]?this.skulist[t]=this.skulist[t]+1:this.skulist[t]=1,this.num++):(this.skulist[t]=this.skulist[t]-1,this.num--,(void 0===this.skulist[t]||this.skulist[t]<0||this.num<0)&&(this.isScuess=!1,this.num=0))):this.isScuess=!1,this.$nextTick(function(){a[s]="",a.playAudio()}))}}),mounted:function(){this._getStoreId()}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"outbound-box"},[s("audio",{ref:"audio",attrs:{src:t.isScuess?"http://hehe-1252068473.costj.myqcloud.com/static/sheep.wav":"http://hehe-1252068473.costj.myqcloud.com/static/horse.wav"}}),t._v(" "),s("div",{staticClass:"ob-block"},[s("div",{staticClass:"obb"},[s("div",{staticClass:"smt-item vm"},[s("span",{staticClass:"vm si-title"},[t._v("开始装箱 ")]),s("Button",{staticClass:"vm",attrs:{type:"default"}},[s("a",{attrs:{href:"printtag:fnsku/"+t.boxId+"/"+t.boxId+"/2"}},[t._v("打印箱子编码")])])],1),t._v(" "),s("div",{staticClass:"smt-item vm smt-input"},[s("span",{staticClass:"vm si-title"},[t._v("装入扫描 ")]),t._v(" "),s("Input",{staticStyle:{width:"180px"},attrs:{placeholder:""},model:{value:t.load,callback:function(e){t.load=e},expression:"load"}})],1),t._v(" "),s("div",{staticClass:"smt-item vm smt-input"},[s("span",{staticClass:"vm si-title"},[t._v("取出扫描 ")]),t._v(" "),s("Input",{staticStyle:{width:"180px"},attrs:{placeholder:""},model:{value:t.extract,callback:function(e){t.extract=e},expression:"extract"}})],1),t._v(" "),s("div",{staticClass:"smt-item vm fr"},[s("Button",{staticClass:"vm",attrs:{type:"primary"},nativeOn:{click:function(e){return t.saveOutbounds(e)}}},[t._v("提交")])],1)]),t._v(" "),s("div",{staticClass:"obb"},[s("div",{staticClass:"smt-item vm"},[s("span",{staticClass:"vm si-title"},[t._v("已扫描数量："+t._s(t.num))])])])]),t._v(" "),s("div",{staticClass:"ob-block"},[s("div",{staticClass:"obb"},[s("div",{staticClass:"smt-item vm"},[s("span",{staticClass:"vm si-title font-red"},[t._v("删除箱子 ")]),t._v(" "),s("Input",{staticStyle:{width:"180px"},attrs:{placeholder:""},model:{value:t.delete_Id,callback:function(e){t.delete_Id=e},expression:"delete_Id"}}),t._v(" "),s("Button",{staticClass:"vm",attrs:{type:"error"},nativeOn:{click:function(e){return t.deleteOutbound(e)}}},[t._v("提交")])],1)])])])},staticRenderFns:[]};var b=s("VU/8")(m,h,!1,function(t){s("ZwcO")},null,null);e.default=b.exports}});
//# sourceMappingURL=3.97b0f7b2aa536b32a340.js.map