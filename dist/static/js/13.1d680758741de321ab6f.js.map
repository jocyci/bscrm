{"version":3,"sources":["webpack:///src/pages/adminManage/authorize.vue","webpack:///./src/pages/adminManage/authorize.vue?8785","webpack:///./src/pages/adminManage/authorize.vue"],"names":["authorize","_this","this","user_id","_this2","data","id","first_name","userList","_this3","Name","storeList","_this4","msg","_this5","searchAction","_this6","_this7","response","modalLoadingAtion","userId","storeId","resetData","_this8","getUsers","getStores","adminManage_authorize","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","size","nativeOn","click","$event","openModel","_v","border","stripe","columns","lists","title","okText","loading","modalLoading","on","on-ok","ok","on-cancel","cancel","model","value","callback","$$v","showModal","expression","staticStyle","width","_l","item","key","_s","label","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"qLAoCAA,QAEA,4BACA,IAAAC,EAAAC,0BAEA,SACA,WACA,cACA,kBAGA,UACA,oBAEA,YAEA,WACA,sBAEA,YAEA,WACA,yBAEA,YAEA,SACA,eACA,sEAKA,aAEA,sDAGAC,YAIA,8EAUA,IAAAC,EAAAF,qJACA,uBACAG,sFAKAC,WAEAC,0BAEAC,sEAGA,IAAAC,EAAAP,kJACA,uBACAG,sFAKAC,WAEAI,qBAEAC,yEAGA,IAAAC,EAAAV,kJACA,0FAGAW,oBAEAA,+EAIA,IAAAC,EAAAZ,mJACA,6CACA,OACAa,kGAGA,gCAEA,IAAAC,EAAAd,qBACA,qBACA,+CAEA,GACA,oBAEA,IAAAe,EAAAf,iDACA,IAAAgB,yIACA,+BAGAC,gGAEAC,kBAEAC,iFAEA,IACAC,cACAP,8FAKA,gBACA,2BAGAO,qCAEA,IAAAC,EAAArB,4IACAI,4DAEAS,sFAKAA,oBACAS,gBACAC,cC5KAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAA1B,KAAa2B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,eAAyBF,EAAA,OAAYE,YAAA,YAAsBF,EAAA,UAAeE,YAAA,UAAAC,OAA6BC,KAAA,UAAAC,KAAA,SAAgCC,UAAWC,MAAA,SAAAC,GAAyB,OAAAX,EAAAY,UAAAD,OAA+BX,EAAAa,GAAA,YAAAb,EAAAa,GAAA,KAAAV,EAAA,OAA2CE,YAAA,8BAAwCF,EAAA,SAAcG,OAAOQ,OAAA,GAAAC,OAAA,GAAAC,QAAAhB,EAAAgB,QAAAvC,KAAAuB,EAAAiB,UAAgE,GAAAjB,EAAAa,GAAA,KAAAV,EAAA,UAA6BA,EAAA,SAAcG,OAAOY,MAAA,OAAAC,OAAA,KAAAC,QAAApB,EAAAqB,cAAwDC,IAAKC,QAAAvB,EAAAwB,GAAAC,YAAAzB,EAAA0B,QAAsCC,OAAQC,MAAA5B,EAAA,UAAA6B,SAAA,SAAAC,GAA+C9B,EAAA+B,UAAAD,GAAkBE,WAAA,eAAyB7B,EAAA,OAAYE,YAAA,uBAAiCF,EAAA,QAAaE,YAAA,OAAiBL,EAAAa,GAAA,WAAAb,EAAAa,GAAA,KAAAV,EAAA,UAA6C8B,aAAaC,MAAA,SAAgBP,OAAQC,MAAA5B,EAAA,OAAA6B,SAAA,SAAAC,GAA4C9B,EAAAR,OAAAsC,GAAeE,WAAA,WAAsBhC,EAAAmC,GAAAnC,EAAA,kBAAAoC,GAAsC,OAAAjC,EAAA,UAAoBkC,IAAAD,EAAAR,MAAAtB,OAAsBsB,MAAAQ,EAAAR,SAAoB5B,EAAAa,GAAAb,EAAAsC,GAAAF,EAAAG,cAA+B,GAAAvC,EAAAa,GAAA,KAAAV,EAAA,OAA6BE,YAAA,uBAAiCF,EAAA,QAAaE,YAAA,OAAiBL,EAAAa,GAAA,WAAAb,EAAAa,GAAA,KAAAV,EAAA,UAA6C8B,aAAaC,MAAA,SAAgBP,OAAQC,MAAA5B,EAAA,QAAA6B,SAAA,SAAAC,GAA6C9B,EAAAP,QAAAqC,GAAgBE,WAAA,YAAuBhC,EAAAmC,GAAAnC,EAAA,mBAAAoC,GAAuC,OAAAjC,EAAA,UAAoBkC,IAAAD,EAAAR,MAAAtB,OAAsBsB,MAAAQ,EAAAR,SAAoB5B,EAAAa,GAAAb,EAAAsC,GAAAF,EAAAG,cAA+B,YAEz7CC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAvE,EACA0B,GATA,EAVA,SAAA8C,GACAF,EAAA,SAaA,KAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/13.1d680758741de321ab6f.js","sourcesContent":["<template>\n  <div class=\"manage-box\">\n    <div class=\"cm-form\">\n      <Button type=\"primary\" size=\"small\" class=\"new-opa\" @click.native=\"openModel\">新增</Button>\n    </div>\n    <div class=\"cm-table user-store-table\">\n      <Table border stripe :columns=\"columns\" :data=\"lists\"></Table>\n    </div>\n    <div class=\"\">\n      <Modal\n        v-model=\"showModal\"\n        title=\"新建授权\"\n        okText=\"授权\"\n        :loading=\"modalLoading\"\n        @on-ok=\"ok\"\n        @on-cancel=\"cancel\">\n        <div class=\"modal-item user-mi\">\n          <span class=\"vm\">用户列表：</span>\n          <Select v-model=\"userId\" style=\"width:130px\">\n              <Option v-for=\"item in userList\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\n          </Select>\n        </div>\n        <div class=\"modal-item user-mi\">\n          <span class=\"vm\">店铺列表：</span>\n          <Select v-model=\"storeId\" style=\"width:130px\">\n              <Option v-for=\"item in storeList\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\n          </Select>\n        </div>\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Apis from '@/common/js/apis'\n\nexport default {\n  name: 'authorize',\n  data () {\n    return {\n      modalLoading: true,\n      userId: '',\n      storeId: '',\n      showModal: false,\n      columns: [\n        {\n          title: '店铺名',\n          key: 'store__Name',\n          width: 130\n        },\n        {\n          title: '店铺地区',\n          key: 'store__Market',\n          width: 130\n        },\n        {\n          title: '用户姓名',\n          key: 'user__first_name',\n          width: 130\n        },\n        {\n          title: '操作',\n          key: 'action',\n          align: 'center',\n          render: (h, params) => {\n            return h('div', [\n              h('Button', {\n                props: {\n                  type: 'error',\n                  size: 'small'\n                },\n                on: {\n                  click: () => {\n                    this.deleteUserStore(params.row.user_id)\n                  }\n                }\n              }, '删除授权')\n            ])\n          }\n        }\n      ],\n      lists: [],\n      userList: [],\n      storeList: []\n    }\n  },\n  methods: {\n    async getUsers () {\n      let response = await Apis.searchUser(null, true)\n      let data = response.data\n      if (!this.$responseMessage(data, 200, '', true)) {\n        let userList = []\n        data.msg.forEach((item) => {\n          userList.push({\n            value: item.id,\n            label: item.first_name\n          })\n        })\n        this.userList = userList\n      }\n    },\n    async getStores () {\n      let response = await Apis.searchStores(true)\n      let data = response.data\n      if (!this.$responseMessage(data, 200, '', true)) {\n        let storeList = []\n        data.msg.forEach((item) => {\n          storeList.push({\n            value: item.id,\n            label: item.Name\n          })\n        })\n        this.storeList = storeList\n      }\n    },\n    async searchAction () {\n      let response = await Apis.searchUserStores(true)\n      if (!this.$responseMessage(response.data, 200, '', true)) {\n        if (this.searchContent) {\n          this.lists = [response.data.msg]\n        } else {\n          this.lists = response.data.msg\n        }\n      }\n    },\n    async deleteUserStore (id) {\n      let response = await Apis.deleteUserStore(id, true)\n      this.$responseMessage(response.data, 200)\n      this.searchAction()\n    },\n    openModel () {\n      this.showModal = true\n    },\n    modalLoadingAtion () {\n      this.showModal = true\n      this.modalLoading = false\n      window.setTimeout(() => {\n        this.modalLoading = true\n      }, 100)\n    },\n    ok () {\n      window.setTimeout(async () => {\n        if (this.$requiredInVerify(this.userId, '用户') || this.$requiredInVerify(this.storeId, '店铺')) {\n          this.modalLoadingAtion()\n          return\n        }\n        let response = await Apis.createNewUserStore({\n          user_id: this.userId,\n          store_id: this.storeId\n        })\n        if (!this.$responseMessage(response.data, 201, '新增授权成功')) {\n          this.showModal = false\n          this.resetData()\n          this.searchAction()\n        }\n      })\n    },\n    resetData () {\n      this.userId = ''\n      this.storeId = ''\n    },\n    cancel () {\n      this.resetData()\n    },\n    async deleteStore (id) {\n      let response = await Apis.deleteStore(id)\n      if (!this.$responseMessage(response.data, 202, '删除成功')) {\n        this.searchAction()\n      }\n    }\n  },\n  created () {\n    this.searchAction()\n    this.getUsers()\n    this.getStores()\n  }\n}\n</script>\n\n<style>\n.user-store-table {\n  width: 55%!important;\n}\n.modal-item {\n  margin: 5px 0;\n}\n.modal-item>span {\n  font-size: 14px;\n  margin-right: 3px;\n  width: 105px;\n}\n.user-mi>span {\n  width: 70px!important;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/adminManage/authorize.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"manage-box\"},[_c('div',{staticClass:\"cm-form\"},[_c('Button',{staticClass:\"new-opa\",attrs:{\"type\":\"primary\",\"size\":\"small\"},nativeOn:{\"click\":function($event){return _vm.openModel($event)}}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"cm-table user-store-table\"},[_c('Table',{attrs:{\"border\":\"\",\"stripe\":\"\",\"columns\":_vm.columns,\"data\":_vm.lists}})],1),_vm._v(\" \"),_c('div',{},[_c('Modal',{attrs:{\"title\":\"新建授权\",\"okText\":\"授权\",\"loading\":_vm.modalLoading},on:{\"on-ok\":_vm.ok,\"on-cancel\":_vm.cancel},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('div',{staticClass:\"modal-item user-mi\"},[_c('span',{staticClass:\"vm\"},[_vm._v(\"用户列表：\")]),_vm._v(\" \"),_c('Select',{staticStyle:{\"width\":\"130px\"},model:{value:(_vm.userId),callback:function ($$v) {_vm.userId=$$v},expression:\"userId\"}},_vm._l((_vm.userList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"modal-item user-mi\"},[_c('span',{staticClass:\"vm\"},[_vm._v(\"店铺列表：\")]),_vm._v(\" \"),_c('Select',{staticStyle:{\"width\":\"130px\"},model:{value:(_vm.storeId),callback:function ($$v) {_vm.storeId=$$v},expression:\"storeId\"}},_vm._l((_vm.storeList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}))],1)])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-363e1a17\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/adminManage/authorize.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-363e1a17\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./authorize.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./authorize.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./authorize.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-363e1a17\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./authorize.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/adminManage/authorize.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}