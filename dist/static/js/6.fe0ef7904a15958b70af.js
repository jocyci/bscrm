webpackJsonp([6],{"0NLm":function(t,e){},"18Yg":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Xxa5"),a=n.n(s),r=n("exGp"),i=n.n(r),c=n("S2w5"),l={name:"",data:function(){var t=this;return{oddNumber:"",tracknumber:"",containeCount:"",selecSupplier:"",sku:"",tracknumberDisable:!1,containeCountDisable:!1,selecSupplierDisable:!1,searchDisable:!0,supplierList:[],skulist:[],notPushNum:0,columns:[{title:"品名",key:"name",width:180},{title:"SKU名",key:"sku",width:160},{title:"图片",key:"img_url",render:function(t,e){return t("img",{attrs:{src:e.row.img_url}})}},{title:"操作",key:"action",align:"center",render:function(e,n){return e("div",[e("Input",{props:{placeholder:"请填写数量"},class:{countClass:!0},style:{width:"80px",marginRight:"10px"},on:{input:function(t){n.row.count=t}}}),e("Button",{props:{type:"warning",size:"small"},on:{click:function(){t.inbound(n)}}},"入库")])}}],lists:[]}},methods:{saveInbounds:function(){var t=this;return i()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.saveInbounds(t.oddNumber,{skulist:t.skulist});case 2:n=e.sent,t.$responseMessage(n.data,200,"已保存入库单")||(t.skulist=[],t.notPushNum=0,t.oddNumber="",t.tracknumber="",t.containeCount="",t.selecSupplier="",t.sku="",t.tracknumberDisable=!1,t.containeCountDisable=!1,t.selecSupplierDisable=!1,t.searchDisable=!0,t.skulist=[],t.notPushNum=0,t.lists=[]);case 4:case"end":return e.stop()}},e,t)}))()},getSuppliers:function(){var t=this;return i()(a.a.mark(function e(){var n,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.searchSuppliers(null,!0);case 2:n=e.sent,t.$responseMessage(n.data,200,"",!0)||(s=[],n.data.msg.forEach(function(t){s.push({value:t.id,label:t.name})}),t.supplierList=s);case 4:case"end":return e.stop()}},e,t)}))()},createNewInbound:function(){var t=this;return i()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.$requiredInVerify(t.tracknumber,"物流编号")||t.$requiredInVerify(t.containeCount,"箱/袋数")||t.$requiredInVerify(t.selecSupplier,"供货商"))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c.a.createNewInbound({container_count:t.containeCount,tracknumber:t.tracknumber,supplier_id:t.selecSupplier},!0);case 4:n=e.sent,t.$responseMessage(n.data,201,"新建成功")||(t.oddNumber=n.data.msg.id,t.disabledAction());case 6:case"end":return e.stop()}},e,t)}))()},searchWarehouseList:function(){var t=this;return i()(a.a.mark(function e(){var n,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.searchWarehouseList({search:t.sku||null,supplier_id:9},!0);case 2:n=e.sent,t.$responseMessage(n.data,200,"",!0)||((s=n.data.msg).forEach(function(t,e){t.classCount=e}),t.lists=s);case 4:case"end":return e.stop()}},e,t)}))()},confirm:function(){var t=this;this.$Modal.confirm({title:"提交",content:"<p>提交后信息将无法更改，请确认</p>",onOk:function(){t.saveInbounds()},onCancel:function(){console.log("Clicked cancel")}})},inbound:function(t){var e=this.$refs.entryTable.querySelectorAll(".countClass")[t.row.classCount].querySelector("input");this.notPushNum=+this.notPushNum+ +t.row.count,this.skulist.push({id:t.row.id,quantity:t.row.count}),e.value=""},disabledAction:function(){this.tracknumberDisable=!0,this.containeCountDisable=!0,this.selecSupplierDisable=!0,this.searchDisable=!1}},created:function(){this.getSuppliers()}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"manage-box entry-box"},[n("div",{staticClass:"cm-form entry-form"},[n("div",{},[n("div",{staticClass:"vm cmf-item"},[n("span",{staticClass:"cmf-font"},[t._v("入库单号：")]),t._v(" "),n("Input",{staticStyle:{width:"150px"},attrs:{disabled:""},model:{value:t.oddNumber,callback:function(e){t.oddNumber=e},expression:"oddNumber"}})],1),t._v(" "),n("div",{staticClass:"vm cmf-item"},[n("span",{staticClass:"cmf-font"},[t._v("物流编号：")]),t._v(" "),n("Input",{staticStyle:{width:"150px"},attrs:{disabled:t.tracknumberDisable,placeholder:"请输入",clearable:""},model:{value:t.tracknumber,callback:function(e){t.tracknumber=e},expression:"tracknumber"}})],1),t._v(" "),n("div",{staticClass:"vm cmf-item"},[n("span",{staticClass:"cmf-font"},[t._v("箱/袋数：")]),t._v(" "),n("Input",{staticStyle:{width:"80px"},attrs:{disabled:t.containeCountDisable,placeholder:"请输入",clearable:""},model:{value:t.containeCount,callback:function(e){t.containeCount=e},expression:"containeCount"}})],1),t._v(" "),n("div",{staticClass:"vm cmf-item"},[n("span",{staticClass:"cmf-font vm"},[t._v("供货商：")]),t._v(" "),n("Select",{staticStyle:{width:"120px"},attrs:{disabled:t.selecSupplierDisable,filterable:"",placeholder:"输入供货商代码"},model:{value:t.selecSupplier,callback:function(e){t.selecSupplier=e},expression:"selecSupplier"}},t._l(t.supplierList,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),n("div",{staticClass:"vm cmf-item fr"},[n("span",{staticClass:"cmf-font vm"},[t._v("未提交：")]),t._v(" "),n("span",{staticClass:"vm",class:{"cmf-font-red":t.notPushNum>0}},[t._v(t._s(t.notPushNum))])])]),t._v(" "),n("div",{staticClass:"entry-action"},[n("div",{staticClass:"vm"},[n("Button",{staticClass:"new-opa",attrs:{type:"primary"},nativeOn:{click:function(e){return t.createNewInbound(e)}}},[t._v("新建")]),t._v(" "),n("Button",{staticClass:"new-opa",attrs:{disabled:!t.skulist.length,type:"warning"},nativeOn:{click:function(e){return t.confirm(e)}}},[t._v("提交")])],1),t._v(" "),n("div",{staticClass:"fr vm"},[n("Input",{staticStyle:{width:"120px"},attrs:{disabled:t.searchDisable,placeholder:"请输入",clearable:""},model:{value:t.sku,callback:function(e){t.sku=e},expression:"sku"}}),t._v(" "),n("Button",{staticClass:"new-opa",attrs:{disabled:t.searchDisable,type:"primary"},nativeOn:{click:function(e){return t.searchWarehouseList(e)}}},[t._v("搜索")])],1)])]),t._v(" "),n("div",{ref:"entryTable",staticClass:"cm-table",staticStyle:{width:"70%"}},[n("Table",{attrs:{border:"",columns:t.columns,data:t.lists}})],1)])])},staticRenderFns:[]};var o={name:"",data:function(){return{searchContent:"",columns:[{title:"入库单ID",key:"id",width:150,render:function(t,e){return t("a",{attrs:{href:"/#/inbound-detail/"+e.row.id,target:"_blank"}},[e.row.id])}},{title:"容器数量",key:"container_count",width:150},{title:"追踪号",key:"tracknumber"}],lists:[]}},methods:{searchAcion:function(){var t=this;return i()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.searchInbound({search:t.searchContent||null},!0);case 2:n=e.sent,t.$responseMessage(n.data,200,"",!0)||(t.lists=n.data.msg);case 4:case"end":return e.stop()}},e,t)}))()}},created:function(){this.searchAcion()}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"manage-box"},[n("div",{staticClass:"cm-form"},[n("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入用户名",clearable:""},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}}),t._v(" "),n("Button",{staticClass:"search",attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return t.searchAcion(e)}}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"cm-table",staticStyle:{width:"40%"}},[n("Table",{attrs:{border:"",stripe:"",columns:t.columns,data:t.lists}})],1)])])},staticRenderFns:[]};var p={name:"inbound",components:{entry:n("VU/8")(l,u,!1,function(t){n("lOee")},null,null).exports,check:n("VU/8")(o,d,!1,function(t){n("0NLm")},null,null).exports}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Tabs",{attrs:{animated:!1}},[e("TabPane",{attrs:{label:"入库录入"}},[e("entry")],1),this._v(" "),e("TabPane",{attrs:{label:"查看入库单"}},[e("check")],1)],1)],1)},staticRenderFns:[]};var v=n("VU/8")(p,m,!1,function(t){n("88oy")},null,null);e.default=v.exports},"88oy":function(t,e){},lOee:function(t,e){}});
//# sourceMappingURL=6.fe0ef7904a15958b70af.js.map