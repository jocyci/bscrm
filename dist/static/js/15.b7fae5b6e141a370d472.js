webpackJsonp([15],{DFGc:function(e,t){},Rtif:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),s=a.n(n),r=a("exGp"),o=a.n(r),c=a("S2w5"),i=a("Q0NQ"),l={name:"store",data:function(){var e=this;return{Name:"",Market:"",MERCHANT_ID:"",MWSAuthToken:"",modalLoading:!0,searchContent:"",showModal:!1,companyName:"",columns:[{title:"店铺名",key:"Name",width:130},{title:"操作",key:"action",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteStore(a.row.id)}}},"删除")])}}],lists:[],marketList:i.a.marketList}},methods:{createNewManager:function(e){var t=this;return o()(s.a.mark(function a(){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.createNewManager({company_id:e},!0);case 2:n=a.sent,t.$responseMessage(n.data,200,"",!0)||t.successTip(n.data.msg);case 4:case"end":return a.stop()}},a,t)}))()},searchAction:function(){var e=this;return o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.searchContent||/^\d+$/.test(e.searchContent)){t.next=3;break}return e.$Message.warning("请输入数字格式的ID"),t.abrupt("return");case 3:if(a=null,!e.searchContent){t.next=10;break}return t.next=7,c.a.searchStoresById(e.searchContent,!0);case 7:a=t.sent,t.next=13;break;case 10:return t.next=12,c.a.searchStores(!0);case 12:a=t.sent;case 13:e.$responseMessage(a.data,200,"",!0)||(e.searchContent?e.lists=[a.data.msg]:e.lists=a.data.msg);case 14:case"end":return t.stop()}},t,e)}))()},deleteCompany:function(e){var t=this;return o()(s.a.mark(function a(){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.deleteCompany(e,!0);case 2:n=a.sent,t.$responseMessage(n.data,200);case 4:case"end":return a.stop()}},a,t)}))()},openModel:function(){this.showModal=!0},modalLoadingAtion:function(){var e=this;this.showModal=!0,this.modalLoading=!1,window.setTimeout(function(){e.modalLoading=!0},100)},ok:function(){var e=this;window.setTimeout(o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.$requiredInVerify(e.Market,"地区")||e.$requiredInVerify(e.Name,"店铺名")||e.$requiredInVerify(e.MERCHANT_ID,"卖家ID")||e.$requiredInVerify(e.MWSAuthToken,"MWS授权令牌"))){t.next=3;break}return e.modalLoadingAtion(),t.abrupt("return");case 3:return t.next=5,c.a.createNewStore({Market:e.Market,Name:e.Name,MERCHANT_ID:e.MERCHANT_ID,MWSAuthToken:e.MWSAuthToken});case 5:a=t.sent,e.$responseMessage(a.data,201,"新增店铺成功")||(e.showModal=!1,e.resetData());case 7:case"end":return t.stop()}},t,e)})))},resetData:function(){this.Market="",this.Name="",this.MERCHANT_ID="",this.MWSAuthToken=""},cancel:function(){this.resetData()},deleteStore:function(e){var t=this;return o()(s.a.mark(function a(){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.deleteStore(e);case 2:n=a.sent,t.$responseMessage(n.data,202,"删除成功")||t.searchAction();case 4:case"end":return a.stop()}},a,t)}))()}},created:function(){this.searchAction()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manage-box"},[a("div",{staticClass:"cm-form"},[a("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入公司名",clearable:""},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}}),e._v(" "),a("Button",{staticClass:"search",attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.searchAction(t)}}},[e._v("搜索")]),e._v(" "),a("Button",{staticClass:"new-opa",attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.openModel(t)}}},[e._v("新增")])],1),e._v(" "),a("div",{staticClass:"cm-table store-table"},[a("Table",{attrs:{border:"",stripe:"",columns:e.columns,data:e.lists}})],1),e._v(" "),a("div",{},[a("Modal",{attrs:{title:"新建公司",loading:e.modalLoading},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("div",{staticClass:"modal-item roll-select"},[a("span",{staticClass:"vm"},[e._v("地区：")]),e._v(" "),a("Select",{staticStyle:{width:"100px"},model:{value:e.Market,callback:function(t){e.Market=t},expression:"Market"}},e._l(e.marketList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",{staticClass:"modal-item"},[a("span",{staticClass:"vm"},[e._v("店铺名：")]),e._v(" "),a("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"请输入",maxlength:60,clearable:""},model:{value:e.Name,callback:function(t){e.Name=t},expression:"Name"}})],1),e._v(" "),a("div",{staticClass:"modal-item"},[a("span",{staticClass:"vm"},[e._v("卖家ID：")]),e._v(" "),a("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"请输入",maxlength:60,clearable:""},model:{value:e.MERCHANT_ID,callback:function(t){e.MERCHANT_ID=t},expression:"MERCHANT_ID"}})],1),e._v(" "),a("div",{staticClass:"modal-item"},[a("span",{staticClass:"vm"},[e._v("MWS授权令牌：")]),e._v(" "),a("Input",{staticClass:"vm",staticStyle:{width:"200px"},attrs:{placeholder:"请输入",maxlength:60,clearable:""},model:{value:e.MWSAuthToken,callback:function(t){e.MWSAuthToken=t},expression:"MWSAuthToken"}})],1)])],1)])},staticRenderFns:[]};var d=a("VU/8")(l,u,!1,function(e){a("DFGc")},null,null);t.default=d.exports}});
//# sourceMappingURL=15.b7fae5b6e141a370d472.js.map